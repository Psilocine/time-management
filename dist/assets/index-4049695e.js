import{v as e,c as a,x as t,y as l,I as n,P as i,M as r,u as s,K as o,F as d,H as u,r as c,V as m,j as p,C as v,a2 as f,ak as g}from"./vue-fb2ba1fe.js";import{p as k,q as y,e as h,r as _}from"./element-icons-af950a3e.js";import{d as q}from"./vue-draggable-541e955a.js";import{E as b,b as V,d as w,e as D,f as M,h as $,i as I,j as N,k as T,l as C,m as U}from"./element-plus-c3b91b68.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const x={class:"task-header"},Y={class:"task-name"},j={key:0,class:"task-details"},O={class:"task-priority"},E={class:"task-create-time"},S={key:0,class:"task-deadline"},H=(e,a)=>{const t=e.__vccOpts||e;for(const[l,n]of a)t[l]=n;return t},L=H(e({__name:"TaskItem",props:{task:{}},emits:["delete"],setup(e,{emit:c}){const m=e,p=a(()=>`priority-${m.task.priority||"medium"}`),v=a(()=>{if(!m.task.deadline)return"";const e=new Date,a=new Date(m.task.deadline).getTime()-e.getTime(),t=Math.floor(a/36e5);return a<0?"overdue":t<=1?"urgent":t<=24?"warning":"normal"}),f=e=>{const a=new Date(e),t=new Date,l=a.getTime()-t.getTime();if(l<0)return`${e} (已过期)`;const n=Math.floor(l/864e5),i=Math.floor(l%864e5/36e5);if(n>0)return`${e} (${n}天${i}小时后)`;if(i>0)return`${e} (${i}小时后)`;return`${e} (${Math.floor(l%36e5/6e4)}分钟后)`},g=()=>{switch(v.value){case"overdue":return"已过期";case"urgent":return"紧急";case"warning":return"即将到期";default:return""}};return(e,a)=>{const c=b,m=V;return t(),l("div",{class:u(["task-item",p.value])},[n("div",x,[n("span",Y,i(e.task.name),1),r(c,{type:"danger",size:"small",icon:s(k),circle:"",onClick:a[0]||(a[0]=a=>e.$emit("delete",e.task.id)),class:"delete-btn"},null,8,["icon"])]),e.task.priority?(t(),l("div",j,[n("div",O,[r(m,null,{default:o(()=>[r(s(y))]),_:1}),n("span",null,i((_=e.task.priority,{low:"低优先级",medium:"中优先级",high:"高优先级"}[_]||"中优先级")),1)])])):d("",!0),n("div",E,[e.task.deadline?(t(),l("div",S,[r(m,null,{default:o(()=>[r(s(h))]),_:1}),n("span",null,i(f(e.task.deadline)),1),n("span",{class:u(["deadline-status",v.value])},i(g()),3)])):d("",!0),n("p",null,"创建于: "+i(e.task.createTime),1)])],2);var _}}}),[["__scopeId","data-v-8d32b4ea"]]),P={class:"four-quadrants-container"},z={class:"header"},A={class:"quadrants-wrapper"},F={class:"quadrants-grid"},J={class:"quadrant quadrant-2"},K={class:"quadrant quadrant-1"},Q={class:"quadrant quadrant-3"},B={class:"quadrant quadrant-4"},G=H(e({__name:"FourQuadrants",setup(e){const a=c(!1),i=c([]),d=c([]),u=c([]),g=c([]),k=m({name:"",quadrant:"",deadline:"",priority:"medium"});let y=null;const h=()=>{if(!k.name||!k.quadrant)return void w.error("请填写任务名称和选择象限");const e={id:Date.now(),name:k.name,deadline:k.deadline,priority:k.priority,createTime:(new Date).toLocaleString()};switch(k.quadrant){case"1":V(i.value,e);break;case"2":V(d.value,e);break;case"3":V(u.value,e);break;case"4":V(g.value,e)}Object.assign(k,{name:"",quadrant:"",deadline:"",priority:"medium"}),a.value=!1,w.success("任务添加成功"),j(),O()};function V(e,a){for(let t=0;t<e.length;t++){if(e[t].priority===a.priority)return void e.splice(t,0,a)}e.push(a)}const x=()=>{j()},Y=e=>{[i,d,u,g].forEach(a=>{const t=a.value.findIndex(a=>a.id===e);t>-1&&a.value.splice(t,1)}),j(),O(),w.success("任务删除成功")},j=()=>{const e={quadrant1:i.value,quadrant2:d.value,quadrant3:u.value,quadrant4:g.value};localStorage.setItem("timeManagementTasks",JSON.stringify(e))},O=()=>{y&&clearInterval(y),y=setInterval(()=>{E()},6e4),E()},E=()=>{const e=new Date;[...i.value,...d.value,...u.value,...g.value].forEach(a=>{if(a.deadline){const t=new Date(a.deadline).getTime()-e.getTime();1!==Math.floor(t/36e5)||a.notified1h?t<=18e5&&t>0&&!a.notified30m?(S(a,"30分钟后到期"),a.notified30m=!0):t<=0&&!a.notifiedExpired&&(S(a,"已到期","error"),a.notifiedExpired=!0):(S(a,"1小时后到期"),a.notified1h=!0)}}),j()},S=(e,a,t="warning")=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(`任务提醒：${e.name}`,{body:a,icon:"/favicon.ico"}),D({title:"任务提醒",message:`${e.name} - ${a}`,type:t,duration:0})};return p(()=>{(()=>{const e=localStorage.getItem("timeManagementTasks");if(e){const a=JSON.parse(e);i.value=a.quadrant1||[],d.value=a.quadrant2||[],u.value=a.quadrant3||[],g.value=a.quadrant4||[]}})(),"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission(),O()}),v(()=>{y&&clearInterval(y)}),(e,c)=>{const m=b,p=M,v=$,y=I,V=N,w=T,D=C,j=U;return t(),l("div",P,[n("div",z,[c[12]||(c[12]=n("h1",null,"时间管理 - 四象限法则",-1)),r(m,{type:"primary",onClick:c[0]||(c[0]=e=>a.value=!0),icon:s(_)},{default:o(()=>c[11]||(c[11]=[f(" 添加任务 ",-1)])),_:1,__:[11]},8,["icon"])]),n("div",A,[n("div",F,[n("div",J,[c[13]||(c[13]=n("div",{class:"quadrant-title"},"第二象限   重要 · 不紧急",-1)),r(s(q),{modelValue:d.value,"onUpdate:modelValue":c[1]||(c[1]=e=>d.value=e),group:"tasks",onChange:x,class:"draggable-area","component-data":{tag:"div",type:"transition-group",name:"flip-list"}},{item:o(({element:e})=>[r(L,{task:e,onDelete:Y},null,8,["task"])]),_:1},8,["modelValue"])]),n("div",K,[c[14]||(c[14]=n("div",{class:"quadrant-title"},"第一象限   重要 · 紧急",-1)),r(s(q),{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=e=>i.value=e),group:"tasks",onChange:x,class:"draggable-area","component-data":{tag:"div",type:"transition-group",name:"flip-list"}},{item:o(({element:e})=>[r(L,{task:e,onDelete:Y},null,8,["task"])]),_:1},8,["modelValue"])]),n("div",Q,[c[15]||(c[15]=n("div",{class:"quadrant-title"},"第三象限   不重要 · 不紧急",-1)),r(s(q),{modelValue:u.value,"onUpdate:modelValue":c[3]||(c[3]=e=>u.value=e),group:"tasks",onChange:x,class:"draggable-area","component-data":{tag:"div",type:"transition-group",name:"flip-list"}},{item:o(({element:e})=>[r(L,{task:e,onDelete:Y},null,8,["task"])]),_:1},8,["modelValue"])]),n("div",B,[c[16]||(c[16]=n("div",{class:"quadrant-title"},"第四象限   不重要 · 紧急",-1)),r(s(q),{modelValue:g.value,"onUpdate:modelValue":c[4]||(c[4]=e=>g.value=e),group:"tasks",onChange:x,class:"draggable-area","component-data":{tag:"div",type:"transition-group",name:"flip-list"}},{item:o(({element:e})=>[r(L,{task:e,onDelete:Y},null,8,["task"])]),_:1},8,["modelValue"])]),c[17]||(c[17]=n("div",{class:"axis-horizontal"},null,-1)),c[18]||(c[18]=n("div",{class:"axis-vertical"},null,-1))])]),r(j,{modelValue:a.value,"onUpdate:modelValue":c[10]||(c[10]=e=>a.value=e),title:"添加新任务",width:"500px"},{footer:o(()=>[r(m,{onClick:c[9]||(c[9]=e=>a.value=!1)},{default:o(()=>c[19]||(c[19]=[f("取消",-1)])),_:1,__:[19]}),r(m,{type:"primary",onClick:h},{default:o(()=>c[20]||(c[20]=[f("确定",-1)])),_:1,__:[20]})]),default:o(()=>[r(D,{model:k,"label-width":"100px"},{default:o(()=>[r(v,{label:"任务名称",required:""},{default:o(()=>[r(p,{modelValue:k.name,"onUpdate:modelValue":c[5]||(c[5]=e=>k.name=e),placeholder:"请输入任务名称"},null,8,["modelValue"])]),_:1}),r(v,{label:"所在象限",required:""},{default:o(()=>[r(V,{modelValue:k.quadrant,"onUpdate:modelValue":c[6]||(c[6]=e=>k.quadrant=e),placeholder:"请选择象限"},{default:o(()=>[r(y,{label:"第一象限（重要·紧急）",value:"1"}),r(y,{label:"第二象限（重要·不紧急）",value:"2"}),r(y,{label:"第三象限（不重要·不紧急）",value:"3"}),r(y,{label:"第四象限（不重要·紧急）",value:"4"})]),_:1},8,["modelValue"])]),_:1}),r(v,{label:"截止时间"},{default:o(()=>[r(w,{modelValue:k.deadline,"onUpdate:modelValue":c[7]||(c[7]=e=>k.deadline=e),type:"datetime",placeholder:"选择截止时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),r(v,{label:"优先级"},{default:o(()=>[r(V,{modelValue:k.priority,"onUpdate:modelValue":c[8]||(c[8]=e=>k.priority=e),placeholder:"选择优先级"},{default:o(()=>[r(y,{label:"低",value:"low"}),r(y,{label:"中",value:"medium"}),r(y,{label:"高",value:"high"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-222be2e4"]]),R={id:"app"};g(e({__name:"App",setup:e=>(e,a)=>(t(),l("div",R,[r(G)]))})).mount("#app");
